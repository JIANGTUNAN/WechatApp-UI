(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"1b08":function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(t("a34a")),r=t("6eba");function a(n){return n&&n.__esModule?n:{default:n}}function u(n,e,t,o,r,a,u){try{var i=n[a](u),c=i.value}catch(s){return void t(s)}i.done?e(c):Promise.resolve(c).then(o,r)}function i(n){return function(){var e=this,t=arguments;return new Promise((function(o,r){var a=n.apply(e,t);function i(n){u(a,o,r,i,c,"next",n)}function c(n){u(a,o,r,i,c,"throw",n)}i(void 0)}))}}var c={data:function(){return{show:!1,form:{number:"",password:"",nickName:""},loading:!0}},methods:{intoApp:function(){n.switchTab({url:"/pages/map/map"})},submit:function(){var e=this;n.login({provider:"weixin",success:function(t){var o=t.code;n.getUserInfo({provider:"weixin",success:function(t){var a=t.userInfo,u=a.avatarUrl,i=a.nickName;(0,r.login)({code:o,avatarUrl:u,nickName:i}).then((function(o){"200"==o.code?n.showToast({title:JSON.stringify(t),icon:"success",duration:2e3,success:function(){var t=o.data.sysUser;n.setStorage({key:"userInfo",data:t}),n.setStorage({key:"token",data:o.data.token}),e.intoApp()}}):n.showToast({title:"登录失败",mask:!0,duration:1e3,icon:"none"})}))}})}})}},onLoad:function(e){var t=this;return i(o.default.mark((function a(){var u,i,c;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(u=e.hideTip||!1,i=n.getStorageSync("token"),c=!1,!i||""==i||u){o.next=6;break}return o.next=6,(0,r.getUser)().then((function(n){200==n.code&&(c=!0,t.intoApp())}));case 6:if(!c){o.next=8;break}return o.abrupt("return");case 8:u||n.showToast({title:"请先登录",icon:"none",mask:!0,duration:1e3}),t.loading=!1;case 10:case"end":return o.stop()}}),a)})))()}};e.default=c}).call(this,t("543d")["default"])},4469:function(n,e,t){},"6b3c":function(n,e,t){"use strict";var o=t("4469"),r=t.n(o);r.a},7977:function(n,e,t){"use strict";t.r(e);var o=t("8cc2"),r=t("e47d");for(var a in r)"default"!==a&&function(n){t.d(e,n,(function(){return r[n]}))}(a);t("6b3c");var u,i=t("f0c5"),c=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"162eedf0",null,!1,o["a"],u);e["default"]=c.exports},"8cc2":function(n,e,t){"use strict";t.d(e,"b",(function(){return r})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return o}));var o={uPopup:function(){return Promise.all([t.e("common/vendor"),t.e("uview-ui/components/u-popup/u-popup")]).then(t.bind(null,"78ae"))}},r=function(){var n=this,e=n.$createElement,o=(n._self._c,t("b0e8"));n._isMounted||(n.e0=function(e){n.show=!0},n.e1=function(e){n.show=!1}),n.$mp.data=Object.assign({},{$root:{m0:o}})},a=[]},d9b6:function(n,e,t){"use strict";(function(n){t("f9ab");o(t("66fd"));var e=o(t("7977"));function o(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=t,n(e.default)}).call(this,t("543d")["createPage"])},e47d:function(n,e,t){"use strict";t.r(e);var o=t("1b08"),r=t.n(o);for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a);e["default"]=r.a}},[["d9b6","common/runtime","common/vendor"]]]);